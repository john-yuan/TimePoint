!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).timepoint=t()}}(function(){return function o(s,f,a){function u(e,t){if(!f[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(p)return p(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var r=f[e]={exports:{}};s[e][0].call(r.exports,function(t){return u(s[e][1][t]||t)},r,r.exports,o,s,f,a)}return f[e].exports}for(var p="function"==typeof require&&require,t=0;t<a.length;t++)u(a[t]);return u}({1:[function(t,e,n){var i=t("./functions/tpl"),s=t("./functions/trim"),f=t("./functions/parseMs"),r=t("./functions/parseTime"),o=t("./functions/lastDayOfTheMonth");function a(t){this.time=r(t)}a.prototype.map=function(){var t=new Date(this.getTime()),e=t.getFullYear(),n=(e+"").substr(-2),i=t.getMonth()+1,r=i<10?"0"+i:i,o=t.getDate(),s=o<10?"0"+o:o,f=t.getHours(),a=f<10?"0"+f:f,u=t.getMinutes(),p=u<10?"0"+u:u,c=t.getSeconds(),m=c<10?"0"+c:c,l=t.getMilliseconds(),h=l<10?"0"+l:l,g=l<100?"0"+h:l;return{YYYY:""+e,YY:""+n,M:""+i,MM:""+r,D:""+o,DD:""+s,h:""+f,hh:""+a,m:""+u,mm:""+p,s:""+c,ss:""+m,S:l=(g=""+g).substr(0,1),SS:h=g.substr(0,2),SSS:g}},a.prototype.format=function(t){"string"!=typeof t&&(t="YYYY-MM-DD hh:mm:ss");var e=this.map();return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/YYYY/g,e.YYYY)).replace(/YY/g,e.YY)).replace(/MM/g,e.MM)).replace(/M/g,e.M)).replace(/DD/g,e.DD)).replace(/D/g,e.D)).replace(/hh/g,e.hh)).replace(/h/g,e.h)).replace(/mm/g,e.mm)).replace(/m/g,e.m)).replace(/ss/g,e.ss)).replace(/s/g,e.s)).replace(/SSS/g,e.SSS)).replace(/SS/g,e.SS)).replace(/S/g,e.S)},a.prototype.getTime=function(){return this.time},a.prototype.getDate=function(){return new Date(this.time)},a.prototype.lastDayOfThisMonth=function(){var t=this.getDate(),e=t.getFullYear(),n=t.getMonth()+1;return o(e,n)},a.prototype.getFirstDay=function(){return new a(this.format("YYYY-MM-01 hh:mm:ss.SSS"))},a.prototype.getLastDay=function(){var t=this.lastDayOfThisMonth();return new a(this.format("YYYY-MM-"+t+" hh:mm:ss.SSS"))},a.prototype.clone=function(){return new a(this.getTime())},a.prototype.copy=function(){return new a(this.getTime())},a.prototype.clearMs=function(){var t=this.getDate();return t.setMilliseconds(0),new a(t.getTime())},a.prototype.addMs=function(t){return t=parseInt(t,10),t=isNaN(t)?0:t,new a(this.getTime()+t)},a.prototype.addSec=function(t){return t=parseInt(t,10),t=isNaN(t)?0:t,new a(this.getTime()+1e3*t)},a.prototype.addMin=function(t){return t=parseInt(t,10),t=isNaN(t)?0:t,new a(this.getTime()+6e4*t)},a.prototype.addHour=function(t){return t=parseInt(t,10),t=isNaN(t)?0:t,new a(this.getTime()+36e5*t)},a.prototype.addDay=function(t){return t=parseInt(t,10),t=isNaN(t)?0:t,new a(this.getTime()+864e5*t)},a.prototype.nextDay=function(){return this.addDay(1)},a.prototype.prevDay=function(){return this.addDay(-1)},a.prototype.at=function(t){var e=this.getDate();e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),t=(t=""+(t||0)).replace(/[\.\:]/g," "),t=(t=s(t)).split(/\s+/);var n=parseInt(t[0],10),i=parseInt(t[1],10),r=parseInt(t[2],10),o=f(t[3]);return isNaN(n)||e.setHours(n),isNaN(i)||e.setMinutes(i),isNaN(r)||e.setSeconds(r),isNaN(o)||e.setMilliseconds(o),new a(e.getTime())},a.prototype.toString=function(t){return this.format(t)},a.prototype.template=function(t){return"string"!=typeof t&&(t="{YYYY}-{MM}-{DD} {hh}:{mm}:{ss}"),i(t,this.map())},a.prototype.prevMonth=function(){return new a(this.getFirstDay().getTime()-864e5).getFirstDay()},a.prototype.nextMonth=function(){return new a(this.getLastDay().getTime()+864e5)},e.exports=a},{"./functions/lastDayOfTheMonth":12,"./functions/parseMs":15,"./functions/parseTime":16,"./functions/tpl":19,"./functions/trim":20}],2:[function(t,e,n){var i=t("../TimePoint");e.exports=function(t){return(new i).at(t)}},{"../TimePoint":1}],3:[function(t,e,n){var i=t("../TimePoint");e.exports=function(t,e){var n=new i(t);return new i(e).getTime()-n.getTime()}},{"../TimePoint":1}],4:[function(t,e,n){t("../TimePoint");var i=t("./diff");e.exports=function(t,e){return i(t,e)/864e5}},{"../TimePoint":1,"./diff":3}],5:[function(t,e,n){var r=t("../TimePoint");e.exports=function(t,e){var n=new r(t),i=new r(e);return n=n.at("12:00:00.000"),((i=i.at("12:00:00.000")).getTime()-n.getTime())/864e5}},{"../TimePoint":1}],6:[function(t,e,n){t("../TimePoint");var i=t("./diff");e.exports=function(t,e){return i(t,e)/36e5}},{"../TimePoint":1,"./diff":3}],7:[function(t,e,n){t("../TimePoint");var i=t("./diff");e.exports=function(t,e){return i(t,e)/6e4}},{"../TimePoint":1,"./diff":3}],8:[function(t,e,n){t("../TimePoint");var i=t("./diff");e.exports=function(t,e){return i(t,e)/1e3}},{"../TimePoint":1,"./diff":3}],9:[function(t,e,n){t("../TimePoint");var u=t("./parse"),p=t("./diff");e.exports=function(t,e){var n,i,r,o=u(t).at("12:00:00.000"),s=u(e).at("12:00:00.000"),f=p(o,s),a=[];if(0<f)for(i=o,r=s.format("YYYY-MM-DD");a.push(i),n=i.format("YYYY-MM-DD"),i=i.nextDay(),n!==r;);else 0===f&&a.push(o);return a}},{"../TimePoint":1,"./diff":3,"./parse":14}],10:[function(t,e,n){t("../TimePoint");var u=t("./parse"),p=t("./diff");e.exports=function(t,e){var n,i,r,o=u(t).at("12:00:00.000").getFirstDay(),s=u(e).at("12:00:00.000").getFirstDay(),f=p(o,s),a=[];if(0<f)for(i=o,r=s.format("YYYY-MM");a.push(i),n=i.format("YYYY-MM"),i=i.nextMonth(),n!==r;);else 0===f&&a.push(o);return a}},{"../TimePoint":1,"./diff":3,"./parse":14}],11:[function(t,e,n){e.exports=function(t){return t=parseInt(t,10),(t=isNaN(t)?0:t)%100==0?t%400==0:t%4==0}},{}],12:[function(t,e,n){var i=t("./isLeapYear"),r=[31,0,31,30,31,30,31,31,30,31,30,31];e.exports=function(t,e){return t=parseInt(t,10),t=isNaN(t)?0:t,e=parseInt(e,10),1===(e=isNaN(e)?0:e-1)?i(t)?29:28:r[e]}},{"./isLeapYear":11}],13:[function(t,e,n){e.exports=function(){return(new Date).getTime()}},{}],14:[function(t,e,n){var i=t("../TimePoint");e.exports=function(t){return new i(t)}},{"../TimePoint":1}],15:[function(t,e,n){e.exports=function(t){if("string"!=typeof t)return 0;for(;t.length<3;)t+="0";return t=t.substr(0,3),parseInt(t,10)}},{}],16:[function(t,e,n){var m=t("./now"),l=t("./trim"),h=t("./parseMs");t("../TimePoint");e.exports=function(e){var t=typeof e;if("string"==t){var n=0,i=!1;if(e=l(e),/^[0-9]+$/.test(e)&&(n=parseInt(e,10),i=!isNaN(n)),i)e=n;else{e=e.replace(/[Tt\-\:\.\/]/g," "),e=(e=l(e)).split(/\s+/);var r=parseInt(e[0],10),o=parseInt(e[1],10),s=parseInt(e[2],10),f=parseInt(e[3],10),a=parseInt(e[4],10),u=parseInt(e[5],10),p=h(e[6]),c=new Date(0);isNaN(r)||c.setFullYear(r),isNaN(o)||c.setMonth(o-1),isNaN(s)||c.setDate(s),isNaN(f)||c.setHours(f),isNaN(a)||c.setMinutes(a),isNaN(u)||c.setSeconds(u),isNaN(p)||c.setMilliseconds(p),e=c.getTime()}}else if("number"==t);else if(e instanceof Date)try{e=e.getTime()}catch(t){e=0}else e=e&&"number"==typeof e.time?e.time:m();return isNaN(e)?m():e}},{"../TimePoint":1,"./now":13,"./parseMs":15,"./trim":20}],17:[function(t,e,n){var s=t("./tpl");e.exports=function(t){t=parseInt(t,10);var e=0;0<(t=isNaN(t)?0:t)?e=1:t<0&&(e=-1,t=-t);var n=Math.floor(t/DAY);t-=n*DAY;var i=Math.floor(t/HOUR);t-=i*HOUR;var r=Math.floor(t/MINUTE);t-=r*MINUTE;var o=Math.floor(t/SECOND);return{d:n,h:i,m:r,s:o,S:t-=o*SECOND,n:e,format:function(t){return s(t,this)}}}},{"./tpl":19}],18:[function(t,e,n){var i=t("./diff"),r=t("./parseTimeDiff");e.exports=function(t,e){return r(i(t,e))}},{"./diff":3,"./parseTimeDiff":17}],19:[function(t,e,n){e.exports=function(t,e){var n=[],i=null,r=/(^|[^\\])\{([^\{\}]*[^\\])?\}/;for(t=""+t,e=e||{};i=r.exec(t);){var o=i.index,s=i[0],f=i[1],a=i[2];a=(a||"").replace(/^\s+|\s+$/g,""),n.push(t.substr(0,o+f.length)),n.push(""+e[a]),t=t.substr(o+s.length),r.lastIndex=0}return n.push(t),n=(n=(n=n.join("")).replace(/\\\{/g,"{")).replace(/\\\}/g,"}")}},{}],20:[function(t,e,n){e.exports=function(t){return"string"!=typeof t&&(t=null==t?"":""+t),t.replace(/^\s+/,"").replace(/\s+$/,"")}},{}],21:[function(t,e,n){var i={TimePoint:t("./TimePoint"),at:t("./functions/at"),diff:t("./functions/diff"),diffDay:t("./functions/diffDay"),diffDayWithoutTime:t("./functions/diffDayWithoutTime"),diffHour:t("./functions/diffHour"),diffMinute:t("./functions/diffMinute"),diffSec:t("./functions/diffSec"),getDateList:t("./functions/getDateList"),getMonthList:t("./functions/getMonthList"),isLeapYear:t("./functions/isLeapYear"),lastDayOfTheMonth:t("./functions/lastDayOfTheMonth"),now:t("./functions/now"),parse:t("./functions/parse"),parseTimeDiff:t("./functions/parseTimeDiff"),timeDiffDetails:t("./functions/timeDiffDetails")};e.exports=i},{"./TimePoint":1,"./functions/at":2,"./functions/diff":3,"./functions/diffDay":4,"./functions/diffDayWithoutTime":5,"./functions/diffHour":6,"./functions/diffMinute":7,"./functions/diffSec":8,"./functions/getDateList":9,"./functions/getMonthList":10,"./functions/isLeapYear":11,"./functions/lastDayOfTheMonth":12,"./functions/now":13,"./functions/parse":14,"./functions/parseTimeDiff":17,"./functions/timeDiffDetails":18}]},{},[21])(21)});